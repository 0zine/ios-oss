machine:
  xcode:
    version: 7.2
checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - find ./Library -maxdepth 2 -name "Cartfile" -exec sh -c 'carthage bootstrap "${0%/*}" --platform tvos' {} \;
dependencies:
  override:
    - bin/carthage-bootstrap-if-needed
  cache_directories:
    - Carthage
test:
  override:
    - xctool
      -reporter pretty
      -reporter junit:$CIRCLE_TEST_REPORTS/xcode/results.xml
      -reporter plain:$CIRCLE_ARTIFACTS/xctool.log
      -destination 'platform=tvOS Simulator,OS=9.1,name=Apple TV 1080p'
      -scheme kickstartertv
